<!-- Page Title -->
<% title "تسجيل حالة تبرع جديدة" %>


<div class="column large-12 sign-up">

	<h1>تسجيل حالة تبرع جديدة</h1>



<!-- Scripts for Location Geocoding -->

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
 <script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>

<div class="column medium-5 sign-up medium-centered">

<!-- Beginning of Request Form -->
<%= form_for(@request, :html => {"data-abide" => ''}) do |f| %>

  <!-- Error Message -->
  <% if @request.errors.any? %>
    <div data-alert class="alert-box" id="error_explanation">
      <h2><%= pluralize(@request.errors.count, "error") %> prohibited this request from being saved:</h2>
      <ul>
      <% @request.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
      <a href="#" class="close">&times;</a>

    </div>
  <% end %>


    <dl class="tabs row hor sign" data-tab>
      <dd class="active column medium-4 first-level">
        <a href="#contact-information">بيانات التواصل</a>
      </dd>
      <dd class="disabled column medium-4 second-level">
        <a href="#patient-information">بيانات المريض</a>
      </dd>
      <dd class="disabled column medium-4 third-level">
        <a href="#hospital-information">بيانات المستشفى</a>
      </dd>

    </dl>
    <div class="tabs-content">
        <div class="content active" id="contact-information">
          <div class="fields_section">
          <!-- Contact info. -->

          <!-- Contact Name -->
          <div class="field">

            <%= f.text_field :contact_name, :required=>"", :placeholder=>"الاسم" %>

            <small class="error">يرجى كتابة الاسم.</small>
          </div>

          <!-- Contact Phone -->
          <div class="field">

            <%= f.text_field :contact_phone, :required=>"", :placeholder=>"رقم التليفون المحمول" %>
            <small class="error">تأكد من كتابة رقم الهاتف ولا يقل عن ١١ رقم.</small>

          </div>

          <!-- Contact Email -->
          <div class="field">

            <%= f.text_field :email, :required=>"", :pattern=>"email", :placeholder=>"البريد الإلكتروني" %>
            <small class="error">تأكد من كتابة البريد الإلكتروني بشكل صحيح.</small>

          </div>

        <!-- Patient ID -->
        <div class="field">

          <%= f.text_field :national_id, :required=>"", :placeholder=>"الرقم القومي" %>
          <small class="error">تأكد من كتابة الرقم القومي بشكل صحيح</small>

        </div>

        </div>
          <div class="row">



            <dl data-tab>
              <dd class="column medium-6 left">
                <a class="button expand disabled" id="complete1" href="#patient-information">أكمل</a>
              </dd>
            </dl>

          </div>


        </div>
        <div class="content" id="patient-information">
          <div class="fields_section">
          <!-- Patient info. -->


          <!-- Patient Name -->
          <div class="field">

            <%= f.text_field :patient_name, :required=>"", :placeholder=>"اسم المريض" %>
            <small class="error">يرجى التأكد من كتابة اسم المريض.</small>

          </div>



          <!-- Patient BloodType -->
          <div class="field">

            <select id="request_blood_type" name="request[blood_type]" required>
            <option value="">اختر فصيلة الدم</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option></select>
            <small class="error">لا تنس اختيار فصيلة الدم.</small>

          </div>

          <!-- Required # of BloodBags -->
          <div class="field">

            <%= f.number_field :blood_bags, :required=>"", :placeholder=>"عدد أكياس الدم" %>
            <small class="error">تأكد من عدد أكياس الدم.</small>

          </div>

          <!-- Due Date -->
          <div class="field">


            <%= f.text_field :due_date, :required=>"", :placeholder=>"مهلة انتهاء الطلب" , :id=>"datepicker"%>
            <small class="error">تأكد من كتابة التاريخ.</small>
            <script type="text/javascript">
              $(function() {
              $( "#datepicker" ).datepicker();
              });
            </script>
          </div>

        </div>

          <div class="row">

            <dl data-tab>
              <dd class="column medium-6">
                <a class="button expand" href="#contact-information">العودة</a>
              </dd>
              <dd class="column medium-6">
                <a class="button expand disabled" id="complete2" href="#hospital-information">أكمل</a>
              </dd>
            </dl>

          </div>

        </div>
        <div class="content" id="hospital-information">
    <!-- Hospital info. -->

    <div class="row">
</div>


          <!-- Submit Button -->
          <div class="actions row">
            <dl data-tab>
              <dd class="column medium-6">
                <a class="button expand" href="#patient-information">العودة</a>
              </dd>
              <dd class="column medium-6">
                <button class="expand disabled" type="submit">سجّل</button>
              </dd>
            </dl>
          </div>
        </div>
    </div>







  </div>

<% end %>
<!-- End of Request Form -->


<script type="text/javascript">
  $("#contact-information").find("input").change( function() {
    var complete = false;
    $("#contact-information").find("input").each( function() {
      if ($(this).val().length === 0) {
        complete = false;
        return false;
      }
    else {
      complete = true;
    }
  });

  if (complete) {
    $("#contact-information").find("a.disabled").removeClass("disabled").addClass("enabled");
    $("dd.first-level").addClass("complete");
  };

  $("#patient-information").find("input").change( function() {
    var complete = false;
    $("#patient-information").find("input").each( function() {
      if ($(this).val().length === 0) {
        complete = false;
        return false;
      }
    else {
      complete = true;
    }
  });

  if (complete) {
    $("#patient-information").find("a.disabled").removeClass("disabled").addClass("enabled");
    $("dd.second-level").addClass("complete");
  };

  });
  });

  $("#hospital-information").find("input").change( function() {
    var complete = false;
    $("#hospital-information").find("input").each( function() {
      if ($(this).val().length === 0) {
        complete = false;
        return false;
      }
    else {
      complete = true;
    }
  });

  if (complete) {
    $("#hospital-information").find("button").removeClass("disabled").addClass("enabled");
    $("dd.third-level").addClass("complete");
  };

  });

  $("#complete1").click( function () {
    $("dd.first-level").removeClass("active");
    $("dd.second-level").removeClass("disabled").addClass("active");
  });

  $("#complete2").click( function () {
    $("dd.second-level").removeClass("active");
    $("dd.third-level").removeClass("disabled").addClass("active");
  });

</script>

</div>

</div>
